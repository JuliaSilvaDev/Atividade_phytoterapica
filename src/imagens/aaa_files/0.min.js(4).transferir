(window.webpackJsonpvtex_product_customizer_2_12_1=window.webpackJsonpvtex_product_customizer_2_12_1||[]).push([[0],{20:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"f",(function(){return v})),n.d(e,"d",(function(){return y}));var r=n(4),u=n(10),i=/(\d{1,3})?\s*(\w*?)(?:$|s|ly)/i,a="".concat("vtex.subscription",".key"),o="".concat(a,".frequency"),c="".concat(a,".purchaseday"),s=Object(u.defineMessages)({subscription:{id:"store/product-customizer.subscription"},frequency:{id:"store/product-customizer.subscription.frequency"},purchaseday:{id:"store/product-customizer.subscription.purchaseday"},purchaseDayLabel:{id:"store/product-customizer.subscription.purchaseday.day"}}),l=Object(u.defineMessages)({day:{id:"store/product-customizer.subscription.frequency.day"},month:{id:"store/product-customizer.subscription.frequency.month"},week:{id:"store/product-customizer.subscription.frequency.week"},year:{id:"store/product-customizer.subscription.frequency.year"}});function d(t){return 0===t.indexOf("vtex.subscription")}function f(t){return function(t){return 0===t.indexOf(a)}(t)?s[t.slice(a.length+1)]:d(t)?s.subscription:{id:t}}function p(t,e){var n=f(t);return n?e.formatMessage(n):t}function v(t){if(null!=t){var e=t.trim().match(i);if(e){var n=Object(r.a)(e,3),u=n[1],a=void 0===u?"1":u,o=n[2];if(o)return{interval:+a,type:o}}}}function y(t){var e=t.inputId,n=t.inputDomain,u=t.frequency,i=t.intl;if(e===o)return n.map((function(t){var n,r=null!==(n=v(t))&&void 0!==n?n:{},u=r.interval,a=r.type,o=e;return a&&(o=i.formatMessage(l[a],{interval:u})),{label:o,value:t}}));if(e===c&&u.type){var a="day"===u.type||"week"===u.type,d={};return n.forEach((function(t){var e=+t.trim();a?e>6&&(e%=7):0===e&&(e=1);var n=a?i.formatDate(new Date(0,0,e),{weekday:"long"}):i.formatMessage(s.purchaseDayLabel,{day:e});d[n]="".concat(e)})),Object.entries(d).map((function(t){var e=Object(r.a)(t,2);return{label:e[0],value:e[1]}}))}return n.map((function(t){return{label:t,value:t}}))}},6:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return b}));var r=n(2),u=n(4),i=n(0),a=n.n(i),o=n(1),c=n(8);function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,u=function(){};return{s:u,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d=Object(i.createContext)((function(){})),f=Object(i.createContext)(void 0),p=function(t){var e,n,r,u,i,a=function(t){var e,n=[],r=s(null!=t?t:[]);try{for(r.s();!(e=r.n()).done;){var u=e.value;n=n.concat(["items",u.itemId,"children",u.groupId])}}catch(t){r.e(t)}finally{r.f()}return n}(t.treePath),o=Object.values(null!==(e=t.items)&&void 0!==e?e:{}).reduce((function(t,e){return t+e.quantity}),0),c=t.inputValues.reduce((function(t,e){return t[e.label]=e.defaultValue,t}),{});return t.path=null!==(n=t.path)&&void 0!==n?n:a,t.quantitySum=null!==(r=t.quantitySum)&&void 0!==r?r:o,t.optin=null!==(u=t.optin)&&void 0!==u?u:t.required,t.valuesOfInputValues=null!==(i=t.valuesOfInputValues)&&void 0!==i?i:c,t},v=function(t){var e=t.assemblyOption,n=t.children,r=t.initiallyOpened;"always"===(void 0===r?"required":r)&&(e.optin=!0);var o=Object(i.useReducer)(O,e,p),c=Object(u.a)(o,2),s=c[0],l=function(t){var e=t.dispatch,n=Object(i.useContext)(d);return Object(i.useCallback)((function(t){e(t),n({type:"UPDATE_CHILDREN",args:t.args})}),[e,n])}({dispatch:c[1]});return a.a.createElement(d.Provider,{value:l},a.a.createElement(f.Provider,{value:s},n))};var y=function(){return Object(i.useContext)(d)},b=function(){return Object(i.useContext)(f)},m=function(t,e){return n=t.path,r=e,n.join("/")===r.join("/")?t:Object(o.path)(e,t);var n,r};function O(t,e){var n,u,i;switch(e.type){case"OPTIN":var a=e.args.groupPath,s=m(t,a);return s.optin=!s.optin,Object.assign({},t);case"SET_INPUT_VALUE":var l=e.args,d=l.groupPath,f=l.inputValue,p=l.inputValueLabel;return m(t,d).valuesOfInputValues[p]=f,Object.assign({},t);case"SET_QUANTITY":if(!t.items)return t;var v=e.args,y=v.itemId,b=v.newQuantity,O=v.type,h=v.groupPath,j=null!==(n=Object(o.path)(h,t))&&void 0!==n?n:t;O===c.a.SINGLE&&(j.items=g(j.items));var I=Object.assign(Object.assign({},j.items),y&&j.items&&j.items[y]?Object(r.a)({},y,Object.assign(Object.assign({},j.items[y]),{quantity:b})):{}),E=Object.values(I).reduce((function(t,e){return t+e.quantity}),0);return j.quantitySum=E,j.items=I,Object.assign({},t);case"UPDATE_CHILDREN":if(!("itemId"in e.args)||!("newQuantity"in e.args)||!("type"in e.args))return t;var w=e.args,q=w.itemId,L=w.newQuantity,S=w.type,T=w.groupPath,_=null!==(u=Object(o.path)(T,t))&&void 0!==u?u:t;S===c.a.SINGLE&&(_.items=g(_.items)),(null==_?void 0:_.items)&&_.items[q]&&(_.items[q].quantity=L);var x=Object.values(null!==(i=null==_?void 0:_.items)&&void 0!==i?i:{}).reduce((function(t,e){return t+e.quantity}),0);return _.quantitySum=x,Object.assign({},t);default:return t}}function g(t){return Object.keys(t).reduce((function(e,n){return e[n]=Object.assign(Object.assign({},t[n]),{quantity:0}),e}),{})}},8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=n(1),u=Object(r.propEq)("maxQuantity",1),i={SINGLE:"SINGLE",TOGGLE:"TOGGLE",MULTIPLE:"MULTIPLE"},a=function(t){var e,n,r,a,o,c=null!==(n=null===(e=t.composition)||void 0===e?void 0:e.minQuantity)&&void 0!==n?n:0,s=null!==(a=null===(r=t.composition)||void 0===r?void 0:r.maxQuantity)&&void 0!==a?a:0;return 1===c&&1===s?i.SINGLE:(null===(o=t.composition)||void 0===o?void 0:o.items.every(u))?i.TOGGLE:i.MULTIPLE}}}]);