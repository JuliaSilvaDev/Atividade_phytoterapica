(window.webpackJsonpvtex_availability_notify_1_11_1=window.webpackJsonpvtex_availability_notify_1_11_1||[]).push([["AvailabilityNotifier"],{0:function(e,a){e.exports=React},1:function(e,a,i){e.exports={notiferContainer:"vtex-availability-notify-1-x-notiferContainer",title:"vtex-availability-notify-1-x-title",notifyLabel:"vtex-availability-notify-1-x-notifyLabel",form:"vtex-availability-notify-1-x-form",content:"vtex-availability-notify-1-x-content",input:"vtex-availability-notify-1-x-input",inputName:"vtex-availability-notify-1-x-inputName",inputEmail:"vtex-availability-notify-1-x-inputEmail",submit:"vtex-availability-notify-1-x-submit",success:"vtex-availability-notify-1-x-success",error:"vtex-availability-notify-1-x-error"}},10:function(e,a){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Button"]},15:function(e,a){e.exports=regeneratorRuntime},19:function(e,a){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/useProduct"]},20:function(e,a){e.exports=__RENDER_8_RUNTIME__},21:function(e,a){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AvailabilitySubscribe"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"skuId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sellerObj"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SellerObjInputType"}}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"context"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sender"},value:{kind:"StringValue",value:"vtex.availability-notify@1.11.1",block:!1}}]},{kind:"Directive",name:{kind:"Name",value:"runtimeMeta"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"StringValue",value:"31cb515e934ff2e2c99f644a271913a774ef3ced4c22f0b8a72d9b5b6ca7da5d",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availabilitySubscribe"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"skuId"},value:{kind:"Variable",name:{kind:"Name",value:"skuId"}}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}},{kind:"Argument",name:{kind:"Name",value:"sellerObj"},value:{kind:"Variable",name:{kind:"Name",value:"sellerObj"}}}],directives:[]}]}}],loc:{start:0,end:378}};i.loc.source={body:'mutation AvailabilitySubscribe($name: String, $email: String, $skuId: String, $locale: String, $sellerObj: SellerObjInputType!) @context(sender: "vtex.availability-notify@1.11.1") @runtimeMeta(hash: "31cb515e934ff2e2c99f644a271913a774ef3ced4c22f0b8a72d9b5b6ca7da5d") {\n  availabilitySubscribe(name: $name, email: $email, skuId: $skuId, locale: $locale, sellerObj: $sellerObj)\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function n(e,a){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==a)return t}}i.definitions.forEach((function(e){if(e.name){var a=new Set;!function e(a,i){if("FragmentSpread"===a.kind)i.add(a.name.value);else if("VariableDefinition"===a.kind){var t=a.type;"NamedType"===t.kind&&i.add(t.name.value)}a.selectionSet&&a.selectionSet.selections.forEach((function(a){e(a,i)})),a.variableDefinitions&&a.variableDefinitions.forEach((function(a){e(a,i)})),a.definitions&&a.definitions.forEach((function(a){e(a,i)}))}(e,a),t[e.name.value]=a}})),e.exports=i,e.exports.AvailabilitySubscribe=function(e,a){var i={kind:e.kind,definitions:[n(e,a)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var l=t[a]||new Set,r=new Set,o=new Set;for(l.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(t[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(a){var t=n(e,a);t&&i.definitions.push(t)})),i}(i,"AvailabilitySubscribe")},32:function(e,a,i){"use strict";i.r(a),function(e){var a=i(8);i.p=Object(a.getPublicPath)("vtex.availability-notify@1.11.1");var t=Object(a.register)((function(){return i(42)}),e,"vtex.availability-notify@1.11.1","vtex.availability-notify@1.x","AvailabilityNotifier");t.renderHotReload,t.setupHMR}.call(this,i(14)(e))},42:function(e,a,i){"use strict";i.r(a);var t=i(3),n=i.n(t),l=i(18),r=i(9),o=i(2),s=i(0),c=i.n(s),u=i(6),d=i(5),m=i(10),v=i.n(m),f=i(7),b=i.n(f),y=i(19),k=i.n(y),p=i(20),N=i(21),g=i.n(N),x=i(1),E=i.n(x);a.default=function(e){var a,i,t,m,f,y=k()(),N=Object(s.useState)(""),x=Object(o.a)(N,2),S=x[0],O=x[1],_=Object(s.useState)(""),h=Object(o.a)(_,2),j=h[0],w=h[1],D=Object(s.useState)(!1),I=Object(o.a)(D,2),M=I[0],A=I[1],V=Object(s.useState)(!1),T=Object(o.a)(V,2),R=T[0],C=T[1],$=Object(s.useState)(!1),L=Object(o.a)($,2),P=L[0],z=L[1],Q=Object(d.useMutation)(g.a),B=Object(o.a)(Q,2),F=B[0],H=B[1],J=H.loading,Z=H.error,q=H.data,G=Object(u.useIntl)(),U=function(e){if(!e||0===e.length)return null;var a=e.find((function(e){return e.sellerDefault}));return a||e[0]}(null===(a=y.selectedItem)||void 0===a?void 0:a.sellers),K=null!==(i=e.available)&&void 0!==i?i:(f=null==U?void 0:U.commertialOffer)&&(Number.isNaN(+f.AvailableQuantity)||f.AvailableQuantity>0),W=null!==(t=e.skuId)&&void 0!==t?t:null===(m=null==y?void 0:y.selectedItem)||void 0===m?void 0:m.itemId,X=Object(p.useRuntime)().culture.locale,Y={sellerName:null==U?void 0:U.sellerName,sellerId:null==U?void 0:U.sellerId,addToCartLink:null==U?void 0:U.addToCartLink,sellerDefault:null==U?void 0:U.sellerDefault};if(K||!W)return null;var ee=function(){var e=Object(r.a)(n.a.mark((function e(a){var i,t,r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),i={skuId:W,name:S,email:j,locale:X,sellerObj:{sellerId:Y.sellerId,sellerName:Y.sellerName,addToCartLink:Y.addToCartLink,sellerDefault:Y.sellerDefault}},e.next=4,F({variables:i});case 4:(t=e.sent).errors||(O(""),w("")),r=new CustomEvent("message:success",{detail:{success:!0,message:G.formatMessage({id:"store/availability-notify.added-message"})}}),o=new CustomEvent("message:success",{detail:{success:!1,message:G.formatMessage({id:"store/availability-notify.error-register"})}}),"object"===Object(l.a)(t)&&!0===t.data.availabilitySubscribe?(C(!1),document.dispatchEvent(r)):(C(!0),document.dispatchEvent(o));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ae="";P&&M&&(ae=G.formatMessage({id:"store/availability-notify.invalid-email"}));var ie=""===S||""===j||M||J;return c.a.createElement("div",{className:E.a.notiferContainer},c.a.createElement("div",{className:"".concat(E.a.title," t-body mb3")},G.formatMessage({id:"store/availability-notify.title"})),c.a.createElement("div",{className:"".concat(E.a.notifyLabel," t-small fw3")},G.formatMessage({id:"store/availability-notify.notify-label"})),c.a.createElement("form",{className:"".concat(E.a.form," mb4"),onSubmit:function(e){return ee(e)}},c.a.createElement("div",{className:"".concat(E.a.content," flex-ns justify-between mt4 mw6")},c.a.createElement("div",{className:"".concat(E.a.input," ").concat(E.a.inputName," w-100 mr5 mb4")},c.a.createElement(b.a,{name:"name",type:"text",placeholder:G.formatMessage({id:"store/availability-notify.name-placeholder"}),value:S,onChange:function(e){O(e.target.value)}})),c.a.createElement("div",{className:"".concat(E.a.input," ").concat(E.a.inputEmail," w-100 mr5 mb4")},c.a.createElement(b.a,{name:"email",type:"text",placeholder:G.formatMessage({id:"store/availability-notify.email-placeholder"}),value:j,onChange:function(e){var a;w(e.target.value),a=e.target.value,A(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.toLowerCase()))},onBlur:function(){return z(!0)},error:P&&M,errorMessage:ae})),c.a.createElement("div",{className:"".concat(E.a.submit," flex items-center mb4")},c.a.createElement(v.a,{type:"submit",variation:"primary",size:"small",disabled:ie,isLoading:J},G.formatMessage({id:"store/availability-notify.send-label"})))),!Z&&!R&&q&&c.a.createElement("div",{className:"".concat(E.a.success," t-body c-success")},G.formatMessage({id:"store/availability-notify.added-message"})),R&&c.a.createElement("div",{className:"".concat(E.a.success," t-body c-danger")},G.formatMessage({id:"store/availability-notify.error-register"})),Z&&c.a.createElement("div",{className:"".concat(E.a.error," c-danger")},G.formatMessage({id:"store/availability-notify.error-message"}))))}},5:function(e,a){e.exports=ReactApollo},6:function(e,a){e.exports=ReactIntl},7:function(e,a){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Input"]}},[[32,"common"]]]);