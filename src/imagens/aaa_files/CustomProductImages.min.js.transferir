(window.webpackJsonpphytoterapica_m3_custom_1_1_25=window.webpackJsonpphytoterapica_m3_custom_1_1_25||[]).push([["CustomProductImages"],{0:function(e,t){e.exports=React},13:function(e,t){e.exports=R},144:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.modal-layout@0.x/ModalTrigger"]},145:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@1.x/applyModifiers"]},18:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.device-detector@0.x/useDevice"]},295:function(e,t,a){"use strict";a.r(t),function(e){var t=a(2);a.p=Object(t.getPublicPath)("phytoterapica.m3-custom@1.1.25");var c=Object(t.register)((function(){return a(347)}),e,"phytoterapica.m3-custom@1.1.25","phytoterapica.m3-custom@1.x","CustomProductImages");c.renderHotReload,c.setupHMR}.call(this,a(8)(e))},30:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@1.x/useCssHandles"]},347:function(e,t,a){"use strict";a.r(t);var c=a(16),o=a(17),r=a.n(o),n=a(26),i=a(1),u=a(0),s=a.n(u),l=a(9),m=a.n(l),d=a(96),f=a.n(d),p=a(40),h=a(13),v=a(30),b=a.n(v),g=a(4),y=a(50),_=a(51),O=a(60),x=a(83),j=a(84),E=a(62),C=a(29);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,c=Object(E.a)(e);if(t){var o=Object(E.a)(this).constructor;a=Reflect.construct(c,arguments,o)}else a=c.apply(this,arguments);return Object(j.a)(this,a)}}var S=function(e){Object(x.a)(a,e);var t=w(a);function a(e){var c;Object(y.a)(this,a),c=t.call(this,e),Object(C.a)(Object(O.a)(c),"executeCommand",(function(e){return function(){if(c.frameReady){var t=JSON.stringify({method:e});c.iframeRef.contentWindow.postMessage(t,"https://player.vimeo.com")}}})),c.state={iframe:{}};var o=c.props,r=o.loop,n=o.autoplay,u=o.width,l=o.height,m=o.showTitle,d=o.url,f="autoplay=".concat(n,"&loop=").concat(r,"&title=").concat(m,"&width=").concat(u,"&height=").concat(l),p="https://vimeo.com/api/oembed.json?url=".concat(d,"&").concat(f);return c.iframeRef=s.a.createRef(),fetch(p).then((function(e){return e.json()})).then((function(t){var o=t.height,r=t.width,n=t.html,u=t.title,s=a.thumbUrlFromResp(t,e.thumbWidth);e.setThumb&&e.setThumb(s,u);var l=n.match(/src= *" *([^"]*) *"/),m=Object(i.a)(l,2)[1];c.setState({iframe:{divStyle:{padding:"".concat(100*o/r,"% 0 0 0")},src:m}})})),c}return Object(_.a)(a,[{key:"render",value:function(){var e=this.state.iframe,t=this.props,a=t.className,c=t.id,o=t.cssHandles;return this.props.playing?this.executeCommand("play")():this.executeCommand("pause")(),s.a.createElement("div",{style:e.divStyle,className:"relative ".concat(a," ").concat(o.videoContainer)},s.a.createElement("iframe",{ref:this.iframeRef,title:c,className:"".concat(o.video," absolute top-0 left-0 w-100 h-100"),src:e.src,frameBorder:"0",allowFullScreen:!0,allow:"autoplay"}))}}],[{key:"thumbUrlFromResp",value:function(e,t){var a=e.height,c=e.width,o=e.thumbnail_url_with_play_button;t=t||e.thumbnail_width;var r=Math.ceil(t*a/c);return o.replace(/_[0123456789]*x[0123456789]*./,"_".concat(t,"x").concat(r,"."))}}]),a}(u.Component);Object(C.a)(S,"getThumbUrl",(function(e){var t="https://vimeo.com/api/oembed.json?url=".concat(e);return fetch(t).then((function(e){return e.json()})).then((function(e){return e.thumbnail_url}))})),S.defaultProps={loop:!0,autoplay:!1,width:null,height:null,showTitle:!1,className:""};var R=S;function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,c=Object(E.a)(e);if(t){var o=Object(E.a)(this).constructor;a=Reflect.construct(c,arguments,o)}else a=c.apply(this,arguments);return Object(j.a)(this,a)}}var N=function(e){Object(x.a)(a,e);var t=I(a);function a(e){var c;Object(y.a)(this,a),c=t.call(this,e),Object(C.a)(Object(O.a)(c),"executeCommand",(function(e){return function(){if(c.frameReady){var t=JSON.stringify({event:"command",func:e});c.iframeRef.contentWindow.postMessage(t,"https://www.youtube.com")}}}));var o=c.props,r=o.loop,n=o.autoplay,i=o.title,u=o.url,l="autoplay=".concat(n,"&loop=").concat(r,"&title=").concat(i,"&enablejsapi=1&iv_load_policy=3&modestbranding=1"),m=a.extractVideoID(u);return c.iframeRef=s.a.createRef(),c.state={iframe:{src:"https://www.youtube.com/embed/".concat(m,"?").concat(l)}},c}return Object(_.a)(a,[{key:"render",value:function(){var e=this.state.iframe,t=this.props,a=t.className,c=t.id,o=t.cssHandles;return this.props.playing?this.executeCommand("playVideo")():this.executeCommand("pauseVideo")(),s.a.createElement("div",{className:"relative ".concat(a," ").concat(o.videoContainer),style:{padding:"30%"}},s.a.createElement("iframe",{ref:this.iframeRef,title:c,className:"".concat(o.video," absolute top-0 left-0 w-100 h-100"),src:e.src,frameBorder:"0",allowFullScreen:!0,allow:"autoplay"}))}}]),a}(u.Component);Object(C.a)(N,"getThumbUrl",(function(e){var t=N.extractVideoID(e);return Promise.resolve("https://img.youtube.com/vi/".concat(t,"/default.jpg"))})),Object(C.a)(N,"extractVideoID",(function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:null})),N.defaultProps={loop:!0,autoplay:!1,width:null,height:null,title:!1,className:""};var P=N,T=Object(h.complement)(h.isEmpty),k=Object(h.compose)(T,Object(h.match)(/vimeo/)),M=Object(h.compose)(T,Object(h.match)(/youtube|youtu.be/)),D=["productVideo","videoContainer","video"];var V=function(e){var t=e.url,a=b()(D).handles;return s.a.createElement("div",{className:a.productVideo},k(t)&&s.a.createElement(g.NoSSR,null,s.a.createElement(R,Object(p.a)({key:t},e,{cssHandles:a}))),M(t)&&s.a.createElement(P,Object(p.a)({key:t},e,{cssHandles:a})))},U=a(18),z=a.n(U),W=function(e,t){if(!t)return{x:0,y:0};var a=[e.clientX-t.x,e.clientY-t.y],c=a[0],o=a[1],r=c<-20||o<-20||c>t.width+20||o>t.height+20;return{x:Object(h.clamp)(0,t.width,.1*-t.width+1.2*c),y:Object(h.clamp)(0,t.height,.1*-t.height+1.2*o),isOutOfBounds:r}},F=function(e){var t=e.children,a=e.zoomContent,c=e.type,o=e.factor,r=Object(u.useState)(!1),n=Object(i.a)(r,2),l=n[0],m=n[1],d=Object(u.useRef)(null),f=Object(u.useRef)(null),p=Object(u.useRef)(null),h=function(e,t,a){var c=f.current;c&&(c.style.transform="scale(".concat(a,", ").concat(a,") translate3d(").concat(-e/a,"px, ").concat(-t/a,"px, 0)"))},v=function(){var e;return null!==(e=p.current)&&void 0!==e?e:function(e){if(!e)return null;var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}(d.current)};Object(u.useEffect)((function(){l||(h(0,0,1),p.current=null)}),[l]);var b=function(e){var t,a;l&&(d.current&&e.target&&(null===(a=(t=d.current).contains)||void 0===a?void 0:a.call(t,e.target))||m(!1))},g=function(e){if(l){var t=W(e,v());"hover"===c&&t.isOutOfBounds?m(!1):h(t.x,t.y,o)}};return Object(u.useEffect)((function(){return document&&(document.addEventListener("mousemove",g),"click"===c&&document.addEventListener("click",b)),function(){document&&(document.removeEventListener("mousemove",g),"click"===c&&document.removeEventListener("click",b))}})),s.a.createElement("div",{ref:d,onMouseOver:"hover"===c?function(){m(!0)}:void 0,onClick:"click"===c?function(e){if(m(!l),!l){var t=W(e,v());h(t.x,t.y,o)}}:void 0,className:"relative"},s.a.createElement("div",{ref:f,style:{transformOrigin:"0 0",fontSize:0}},t,a&&l&&s.a.createElement("div",{className:"absolute top-0 left-0 right-0 bottom-0",style:{transformOrigin:"0 0",transform:"scale(".concat(1/o,")"),fontSize:0}},a)))},H=a(144),B=a.n(H);var J=function(e){var t=e.children,a=e.ModalZoomElement;return s.a.createElement(B.a,null,t,s.a.createElement(a,null))},L=function(e){var t=e.children,a=e.factor,c=void 0===a?2:a,o=e.zoomContent,r=e.ModalZoomElement,n=e.mode,i=void 0===n?"in-place-click":n;if(z()().isMobile&&"disabled"!==i&&"open-modal"!==i)return s.a.createElement(F,{type:"click",factor:c,zoomContent:o},t);switch(i){case"in-place-hover":return s.a.createElement(F,{type:"hover",factor:c,zoomContent:o},t);case"in-place-click":return s.a.createElement(F,{type:"click",factor:c,zoomContent:o},t);case"open-modal":if(r)return s.a.createElement(J,{ModalZoomElement:r},t);case"disabled":default:return s.a.createElement(s.a.Fragment,null,t)}},Z=(a(311),a(312),a(44)),X=a.n(Z),Y=a(145),q=a.n(Y),A=["productImage","productImageTag","productVideo","videoContainer","video"],G=function(){var e=b()(A).handles,t=m()(),a=null==t?void 0:t.product;console.log("product",a);var o=null==a?void 0:a.items,l=null==a?void 0:a.properties,d=Object(u.useState)(null==a?void 0:a.productId),p=Object(i.a)(d,2),h=p[0],v=p[1],g=Object(u.useState)([]),y=Object(i.a)(g,2),_=y[0],O=y[1],x=Object(u.useState)([]),j=Object(i.a)(x,2),E=j[0],C=j[1],w=Object(u.useState)(null),S=Object(i.a)(w,2),I=S[0],N=S[1],T=Object(u.useState)(null),D=Object(i.a)(T,2),U=D[0],z=D[1],W=Object(u.useRef)(null),F=Object(u.useRef)(null);return Object(u.useEffect)((function(){N(W.current),z(F.current);var e=0;null!==(null==a?void 0:a.productId)&&(e=null==a?void 0:a.productId),v(e)})),Object(u.useEffect)((function(){var e=[];O([]);for(var t=function(t){var a=o[0].images[t].imageUrl;O((function(e){return[].concat(Object(c.a)(e),[a])})),e.push(a)},a=0;a<o[0].images.length;a++)t(a);for(var i="0",u=0;u<l.length;u++)"posicaoVideo"===l[u].name&&(i=l[u].values[0]);for(var s=[],m=0;m<o[0].images.length;m++){var d=o[0].images[m].imageUrl;s.push({type:"image",url:d})}Object(n.a)(r.a.mark((function t(){var a,c,n,u,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i.length>0&&"0"!==i)){t.next=17;break}a=0;case 2:if(!(a<o[0].images.length)){t.next=15;break}if((c=+i[0])!=a-1){t.next=12;break}return n=o[0].videos[0].videoUrl,s.splice(c-1,0,{type:"video",url:n}),t.next=9,m=75,k(r=n)?R.getThumbUrl(r,m):M(r)?P.getThumbUrl(r,m):void 0;case 9:u=t.sent,e.splice(c-1,0,u.replace("d_295x166","d_50x75")),O(e);case 12:a++,t.next=2;break;case 15:t.next=19;break;case 17:l=o[0].videos[0].videoUrl,s.push({type:"video",url:l});case 19:case"end":return t.stop()}var r,m}),t)})))(),C(s)}),[h]),s.a.createElement("div",{className:X.a.CustomProductImages_SliderContainer,id:h},s.a.createElement("div",{className:X.a.CustomProductImages_mainSlider,id:h},s.a.createElement(f.a,{dots:!1,fade:!1,infinite:!1,speed:250,slidesToShow:1,slidesToScroll:1,swipeToSlide:!1,draggable:!1,asNavFor:U,ref:W},E.map((function(t,a){var c="image"==t.type;return s.a.createElement("div",{key:a,className:X.a.CustomProductImages_SlideWrapper},c?s.a.createElement(L,{mode:"in-place-click",factor:2,zoomContent:s.a.createElement("img",{role:"presentation",src:t.url,className:"".concat(q()(e.productImageTag,"zoom")),style:{maxWidth:"unset",width:"".concat(200,"%"),height:"".concat(200,"%"),objectFit:"contain"},sizes:"(max-width: 64.1rem) 100vw, 50vw"})},s.a.createElement("img",{className:X.a.CustomProductImages_MainSliderImage,src:t.url})):s.a.createElement("div",{className:X.a.CustomProductImages_ProductVideo},s.a.createElement(V,{url:t.url,key:t.url,cssHandles:e,id:a})))})))),s.a.createElement("div",{className:X.a.CustomProductImages_ThumbnailSlider,id:h},s.a.createElement(f.a,{dots:!1,arrows:!1,fade:!1,infinite:!1,speed:500,slidesToShow:5,slidesToScroll:1,swipeToSlide:!0,draggable:!1,focusOnSelect:!0,asNavFor:I,ref:F},_.map((function(e,t){return s.a.createElement("div",{key:t,className:X.a.CustomProductImages_SlideWrapperThumb},s.a.createElement("img",{className:X.a.CustomProductImages_ThumbImage,src:e}))})))))};t.default=G},4:function(e,t){e.exports=__RENDER_8_RUNTIME__},44:function(e,t,a){e.exports={CustomProductImages_SliderContainer:"phytoterapica-m3-custom-1-x-CustomProductImages_SliderContainer",CustomProductImages_MainSlider:"phytoterapica-m3-custom-1-x-CustomProductImages_MainSlider",CustomProductImages_ThumbnailSlider:"phytoterapica-m3-custom-1-x-CustomProductImages_ThumbnailSlider",CustomProductImages_ProductVideo:"phytoterapica-m3-custom-1-x-CustomProductImages_ProductVideo",CustomProductImages_SlideWrapper:"phytoterapica-m3-custom-1-x-CustomProductImages_SlideWrapper",CustomProductImages_MainSliderImage:"phytoterapica-m3-custom-1-x-CustomProductImages_MainSliderImage",CustomProductImages_SlideWrapperThumb:"phytoterapica-m3-custom-1-x-CustomProductImages_SlideWrapperThumb",CustomProductImages_ThumbImage:"phytoterapica-m3-custom-1-x-CustomProductImages_ThumbImage"}},5:function(e,t){e.exports=Classnames},72:function(e,t){e.exports=regeneratorRuntime},9:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/useProduct"]}},[[295,"common",2]]]);